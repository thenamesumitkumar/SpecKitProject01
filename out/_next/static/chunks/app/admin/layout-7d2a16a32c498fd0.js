(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[91],{4258:function(e,t,r){Promise.resolve().then(r.bind(r,6631))},7648:function(e,t,r){"use strict";r.d(t,{default:function(){return l.a}});var a=r(2972),l=r.n(a)},9376:function(e,t,r){"use strict";var a=r(5475);r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}})},6631:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return i}});var a=r(7437),l=r(9376),s=r(6148),n=r(9295),o=r(1293);function i(e){let{children:t}=e,{user:r,loading:i}=(0,s.a)(),u=(0,l.useRouter)();return i?(0,a.jsx)("div",{className:"flex h-screen items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"}),(0,a.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}):r?"admin"!==r.role&&"hr"!==r.role?(u.push("/ess"),null):(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)(n.h,{}),(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)(o.Y,{}),(0,a.jsx)("main",{className:"flex-1 p-8",children:t})]})]}):(u.push("/login"),null)}},6148:function(e,t,r){"use strict";r.d(t,{AuthProvider:function(){return i},a:function(){return u}});var a=r(7437),l=r(2265);let s=[{email:"employee@company.com",password:"password123",role:"employee",name:"Demo Employee"},{email:"admin@company.com",password:"admin123",role:"admin",name:"Demo Admin"}],n="hr_payroll_session",o=(0,l.createContext)(void 0);function i(e){let{children:t}=e,[r,i]=(0,l.useState)(null),[u,c]=(0,l.useState)(!0);(0,l.useEffect)(()=>{i(function(){let e=localStorage.getItem(n);if(!e)return null;try{let t=JSON.parse(e);if(new Date(t.expiryTime)<new Date)return localStorage.removeItem(n),null;return t.user}catch(e){return null}}()),c(!1)},[]);let d=async(e,t)=>{c(!0);try{let r=function(e,t){let r=function(e,t){let r=s.find(r=>r.email===e&&r.password===t);return{valid:!!r,user:r}}(e,t);return r.valid&&r.user?{valid:!0,user:{id:e.split("@")[0].toUpperCase(),email:e,firstName:r.user.name.split(" ")[0],lastName:r.user.name.split(" ")[1]||"",role:r.user.role}}:{valid:!1}}(e,t);if(!r.valid||!r.user)throw Error("Invalid email or password");let a=function(e){let t=new Date,r=new Date(t.getTime()+864e5),a={user:e,loginTime:t.toISOString(),expiryTime:r.toISOString()};return localStorage.setItem(n,JSON.stringify(a)),a}(r.user);i(a.user)}finally{c(!1)}};return(0,a.jsx)(o.Provider,{value:{user:r,loading:u,login:d,logout:()=>{localStorage.removeItem(n),i(null)}},children:t})}function u(){let e=(0,l.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},9295:function(e,t,r){"use strict";r.d(t,{h:function(){return n}});var a=r(7437),l=r(7648),s=r(6148);function n(){let{user:e,logout:t}=(0,s.a)();return(0,a.jsx)("header",{className:"border-b border-gray-200 bg-white shadow-sm",children:(0,a.jsx)("div",{className:"mx-auto max-w-7xl px-4 py-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsx)("h1",{className:"text-2xl font-bold text-blue-600",children:"HR & Payroll"})}),e?(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("p",{className:"font-semibold text-gray-900",children:[e.firstName," ",e.lastName]}),(0,a.jsx)("p",{className:"text-sm text-gray-600 capitalize",children:e.role})]}),(0,a.jsx)("button",{onClick:t,className:"rounded-lg bg-red-600 px-4 py-2 text-white font-semibold hover:bg-red-700",children:"Logout"})]}):(0,a.jsx)(l.default,{href:"/login",className:"text-blue-600 hover:text-blue-700 font-semibold",children:"Login"})]})})})}},1293:function(e,t,r){"use strict";r.d(t,{Y:function(){return o}});var a=r(7437),l=r(7648),s=r(9376),n=r(6148);function o(){let e=(0,s.usePathname)(),{user:t}=(0,n.a)();if(!t)return null;let r="employee"===t.role,o="admin"===t.role||"hr"===t.role;return(0,a.jsx)("aside",{className:"w-64 border-r border-gray-200 bg-gray-50 py-6",children:(0,a.jsxs)("nav",{className:"space-y-2 px-4",children:[r&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h2",{className:"mb-4 text-sm font-semibold text-gray-900",children:"Employee Portal"}),(0,a.jsx)(l.default,{href:"/ess",className:"block rounded-lg px-4 py-2 text-sm font-medium ".concat("/ess"===e?"bg-blue-100 text-blue-600":"text-gray-700 hover:bg-gray-200"),children:"Dashboard"}),(0,a.jsx)(l.default,{href:"/ess/salary",className:"block rounded-lg px-4 py-2 text-sm font-medium ".concat("/ess/salary"===e?"bg-blue-100 text-blue-600":"text-gray-700 hover:bg-gray-200"),children:"Salary"}),(0,a.jsx)(l.default,{href:"/ess/leave",className:"block rounded-lg px-4 py-2 text-sm font-medium ".concat("/ess/leave"===e?"bg-blue-100 text-blue-600":"text-gray-700 hover:bg-gray-200"),children:"Leave"}),(0,a.jsx)(l.default,{href:"/ess/attendance",className:"block rounded-lg px-4 py-2 text-sm font-medium ".concat("/ess/attendance"===e?"bg-blue-100 text-blue-600":"text-gray-700 hover:bg-gray-200"),children:"Attendance"})]}),o&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h2",{className:"mb-4 text-sm font-semibold text-gray-900",children:"Admin Portal"}),(0,a.jsx)(l.default,{href:"/admin",className:"block rounded-lg px-4 py-2 text-sm font-medium ".concat("/admin"===e?"bg-blue-100 text-blue-600":"text-gray-700 hover:bg-gray-200"),children:"Dashboard"}),(0,a.jsx)(l.default,{href:"/admin/employees",className:"block rounded-lg px-4 py-2 text-sm font-medium ".concat("/admin/employees"===e?"bg-blue-100 text-blue-600":"text-gray-700 hover:bg-gray-200"),children:"Employees"}),(0,a.jsx)(l.default,{href:"/admin/payroll",className:"block rounded-lg px-4 py-2 text-sm font-medium ".concat("/admin/payroll"===e?"bg-blue-100 text-blue-600":"text-gray-700 hover:bg-gray-200"),children:"Payroll"}),(0,a.jsx)(l.default,{href:"/admin/leave-approvals",className:"block rounded-lg px-4 py-2 text-sm font-medium ".concat("/admin/leave-approvals"===e?"bg-blue-100 text-blue-600":"text-gray-700 hover:bg-gray-200"),children:"Leave Approvals"}),(0,a.jsx)(l.default,{href:"/admin/settlement",className:"block rounded-lg px-4 py-2 text-sm font-medium ".concat("/admin/settlement"===e?"bg-blue-100 text-blue-600":"text-gray-700 hover:bg-gray-200"),children:"Settlement"}),(0,a.jsx)(l.default,{href:"/admin/compliance",className:"block rounded-lg px-4 py-2 text-sm font-medium ".concat("/admin/compliance"===e?"bg-blue-100 text-blue-600":"text-gray-700 hover:bg-gray-200"),children:"Compliance"})]}),(0,a.jsx)("hr",{className:"my-4"}),(0,a.jsx)(l.default,{href:"/faq",className:"block rounded-lg px-4 py-2 text-sm font-medium ".concat("/faq"===e?"bg-blue-100 text-blue-600":"text-gray-700 hover:bg-gray-200"),children:"FAQ"})]})})}}},function(e){e.O(0,[972,971,117,744],function(){return e(e.s=4258)}),_N_E=e.O()}]);